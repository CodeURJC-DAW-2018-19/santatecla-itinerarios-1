<td-layout #layout>
  <td-navigation-drawer logo="assets:logo" sidenavTitle="Unidades" name="Role: {{role}}" email="Usuario: {{username}}">
    <mat-nav-list>
      <a mat-list-item [routerLink] routerLink="/units" (click)="layout.close()">Unidades</a>
      <a mat-list-item *ngFor="let unit of units" [routerLink]="'/units/' + unit.id" (click)="layout.close()">{{unit.title}}</a>
    </mat-nav-list>
    <mat-nav-list td-navigation-drawer-menu>
      <a mat-list-item (click)="login()" *ngIf="isAnonymous">
        <mat-icon>exit_to_app</mat-icon>Sign in
      </a>
      <a mat-list-item (click)="logout()" *ngIf="!isAnonymous">
        <mat-icon>exit_to_app</mat-icon>Sign out
      </a>
    </mat-nav-list>
  </td-navigation-drawer>
  <td-layout-nav>
    <button mat-icon-button td-menu-button tdLayoutToggle>
      <mat-icon>menu</mat-icon>
    </button>
    <div td-toolbar-content layout="row" layout-align="center center" flex>
      <span>Gestor de itinerarios</span>
      <span flex></span>
      <a mat-icon-button matTooltip="Github" href="https://github.com/CodeURJC-DAW-2018-19/santatecla-itinerarios-1" target="_blank">
        <mat-icon svgIcon="assets:github"></mat-icon>
      </a>
    </div>

    <td-search-box backIcon="arrow_back" placeholder="Search here" [(ngModel)]="searchInputTerm" [showUnderline]="true" [debounce]="500" [alwaysVisible]="true" (searchDebounce)="searchInputTerm = $event" (search)="searchInputTerm = $event" (clear)="searchInputTerm = ''" (blur)="onBlurEvent()">
    </td-search-box>
    <td-expansion-panel *ngFor="let unit of units" label="{{unit.title}}">
      <div class="md-padding">
        <mat-nav-list>
          <a mat-list-item [routerLink]="'/units/' + unit.id + '/itineraries/' + itinerary.id" *ngFor="let itinerary of unit.itineraries | async"> {{itinerary.title}} </a>
        </mat-nav-list>
      </div>
    </td-expansion-panel>
    <router-outlet></router-outlet>

    <td-layout-footer>
      <div layout="row" layout-align="start center">
        <span class="mat-caption">DAW Equipo 7</span>
        <span flex></span>
        <mat-icon svgIcon="assets:logo"></mat-icon>
      </div>
    </td-layout-footer>
  </td-layout-nav>
</td-layout>
